pipeline {
    agent any

    stages {
        stage('Install Node.js') {
      steps {
        script {
          // Install NVM (Node Version Manager)
          sh 'curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash'

          // Source NVM initialization script to set up NVM for the current shell session
          sh 'source ~/.nvm/nvm.sh || true'  // Use || true to ignore errors if the script is already sourced

          // Install Node.js and npm using NVM
          sh 'nvm install 14'
          sh 'nvm use 14'

          // Verify Node.js and npm installation
          sh 'node -v'
          sh 'npm -v'

          // Install project dependencies
          sh 'npm install'
        }
      }
        }
    }
}
